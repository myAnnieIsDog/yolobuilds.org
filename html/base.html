<!DOCTYPE html>
<html lang="en">
{% load i18n static humanize %}

<head>
    <title> {{ title }} </title>

    <link rel="stylesheet" href="{% static 'base.css' %}">
    {% block extra_css %} {% endblock extra_css %}
    {% block dark-mode-vars %} {% endblock dark-mode-vars %}

    <script defer src="{% static 'alpine.min.js' %}"></script>
    <script defer src="{% static 'htmx.min.js' %}"></script>

    {% block extrahead %}{% endblock %}

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Scott Doolittle" />
    <meta name="description" content="Yolo Builds v0.24.0." />

    {% block blockbots %}
    <meta name="robots" content="NONE,NOARCHIVE">
    {% endblock %}
    <!-- {% if debug %}
        if (typeof window.htmx !== "undefined") {
            htmx.on("htmx:afterSettle", function(detail) {
                if (
                    typeof window.djdt !== "undefined"
                    && detail.target instanceof HTMLBodyElement
                ) {
                    djdt.show_toolbar();
                }
            });
        }
    {% endif %} -->
</head>

{% block messages %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>
        {{ message|capfirst }}
    </li>
    {% endfor %}
</ul>
{% endif %}
{% endblock messages %}

{% block sidebar %}{% endblock %}

<body {% if bodyclass %} class="{{ bodyclass }}" {% endif %} data-admin-utc-offset="{% now 'Z' %}"
    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' x-data="{ bp: @js($'data/BP24-0000') }">
    <header class="grid">
        <div style="margin-right:120px">
            <h1> {{ header }} </h1>
            <p> {{ headDescription}} </p>
        </div>
        <a id="MainLogo" href="/">
            <img style="width:120px;height:80px; position:fixed; top:0; right:0"
                src="{% static 'white_logo_transparent_background.png' %}" alt="Yolo Builds logo and link to home">
        </a>
    </header>

    <main>
        {% block main %}
        <section> This is the base.html text. Define a block "main" to overwrite this placeholder text. </section>
        {% endblock main %}
    </main>

    <footer x-data="{ verified: false, admin: false, open: false }">
        <!-- On this tite the footer is the location of the main menu and similar links/buttons. 
        It is placed here to promote ease of use for smartpphone users with one hand. -->

        <button id="MainMenu" @click="open = ! open" x-show="! open"> Menu </button>
        <button id="MainMenu" @click="open = ! open" x-show="open"> Close Menu </button>

        <!-- Get Main Menu Partial -->
        <!-- In this file 'Partial' means the template partial that is used for each section. -->
        <div id="MainDropdown" x-show="open" @click.outside="open = false">
            <a target="_blank" href="html/building.html">
                <button id="settings"> Building </button></a><br>

            <a target="_blank" href="html/contacts.html">
                <button id="settings"> Contacts </button></a><br>

            <a target="_blank" href="html/fiscal.html">
                <button id="settings"> Fiscal </button></a><br>

            <a target="_blank" href="html/inspections.html">
                <button id="settings"> Inspections </button></a><br>

            <a target="_blank" href="html/land.html">
                <button id="settings"> Addresses </button></a><br>

            <a target="_blank" href="html/licenses.html">
                <button id="settings"> Licenses </button></a><br>

            <a target="_blank" href="html/parcels">
                <button id="settings"> Parcels </button></a><br>

            <a target="_blank" href="html/plan.html">
                <button id="settings"> Planning </button></a><br>

            <a target="_blank" href="html/pw.html">
                <button id="settings"> Public Works </button></a><br>

            <a target="_blank" href="html/reviews.html">
                <button id="settings"> Reviews </button></a><br>

            <button @click="searchDialog.showModal(); 
                open = false">
                Search
            </button>
        </div>

        <button x-show="! verified">Login</button>
        <button x-show="! verified">Register</button>
        <button x-show="verified">Logout</button>
        <button x-show="verified">Profile</button>
        <button x-show="admin * verified">Configuration</button>

        <div id="search">
            <dialog id="searchDialog">
                <h2> Search </h2>
                <form action="" method="dialog">
                    <table class="search">
                        <colgroup>
                            <col class="searchType">
                            <col class="searchTerm">
                        </colgroup>

                        <tr>
                            <th> Search Type </th>
                            <th> Search Term </th>
                        </tr>
                        <tr>
                            <td> APN </td>
                            <td> <input type="text"> </td>
                        </tr>
                        <tr>
                            <td> Address # </td>
                            <td> <input type="text"> </td>
                        </tr>
                        <tr>
                            <td> Street </td>
                            <td> <input type="text"> </td>
                        </tr>
                        <tr>
                            <td> Town </td>
                            <td> <input type="text"> </td>
                        </tr>
                    </table>
                    <hr>
                    <table class="search">
                        <colgroup>
                            <col class="searchType">
                            <col class="searchTerm">
                        </colgroup>
                        <tr>
                            <td> Bldg Permit </td>
                            <td> <input type="text"> </td>
                        </tr>
                        <tr>
                            <td> Contact </td>
                            <td> <input type="text"> </td>
                        </tr>
                        <tr>
                            <td> License </td>
                            <td> <input type="text"> </td>
                        </tr>
                        <tr>
                            <td> PW Permit </td>
                            <td> <input type="text"> </td>
                        </tr>

                        <tr>
                            <td> Zone File </td>
                            <td> <input type="text"> </td>
                        </tr>
                    </table>
                    <button type="submit"> Search </button>
                </form>
            </dialog>
        </div>
    </footer>
</body>

</html>